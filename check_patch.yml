- name: windows server patching
  hosts: all
     ansible_connection=winrm        
     ansible_winrm_transport=ntlm
     ansible_winrm_scheme=http
     ansible_winrm_server_cert_validation=ignore   
     ansible_port=5985
  tasks:

  - name: Check for missing updates
    win_updates:
       state: searched
    register: update_results

  - name: report update results
    debug:
      msg: |
        {% for k in update_results.updates %}
        {{ k.title }}
        {% endfor %}
